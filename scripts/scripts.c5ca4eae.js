"use strict";angular.module("parseImportApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("parseImportApp").controller("MainCtrl",["$scope","ExportData","HTTP_HEADERS",function(a,b,c){a.fileread=null,a["import"]=function(){if(a.importForm.$invalid&&!a.fileread)return void console.log("not valid");var d,e={};c.set({appId:a.appId,restKey:a.restKey||null,endpoint:a.endpoint}),d=_.chunk(a.fileread,50),_.forEach(d,function(c){e.requests=[],_.forEach(c,function(b){var c={method:"POST",path:a["class"],body:b};e.requests.push(c)}),b.create(e).$promise.then(function(b){a.success=!0,a.message="Import Successful"},function(b){a.success=!1,a.message="Error: "+b})})}}]),angular.module("parseImportApp").factory("ExportData",["$resource","HTTP_HEADERS",function(a,b){return{create:function(a){var b={};return b.requests=a.requests,console.log(b),this.post().postJSON(b)},post:function(){var c=a("https://api.parse.com/1/batch",{},{postJSON:{method:"POST",headers:b.get(),isArray:!0}});return c}}}]),angular.module("parseImportApp").directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("change",function(c){a.$apply(function(){d.$setViewValue(b.val()),d.$render()});var e=new FileReader;e.onload=function(b){a.$apply(function(){a.fileread=JSON.parse(b.target.result)})},e.readAsText(c.target.files[0])})}}}),angular.module("parseImportApp").factory("HTTP_HEADERS",function(){var a,b;return{set:function(c){console.log(c),a=c.appId,b=c.restKey},get:function(){return{"X-Parse-Application-Id":a,"X-Parse-REST-API-Key":b,"Content-Type":"application/json"}}}});